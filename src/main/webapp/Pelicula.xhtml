<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./TemplateCine.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="spacetable">
                <h1><h:outputText value="Mantenimiento Pelicula"/></h1>
                <p:dataTable value="#{peliculaBean.lazy}" var="item"
                             lazy="true"
                             selectionMode="single"
                             selection="#{peliculaBean.peli}"
                             paginator="true"
                             rows="6"
                             draggableColumns="true"
                             paginatorPosition="bottom"
                             >
                    <p:ajax event="rowSelect" update=":formulario" rendered=":formulario"/>
                    <p:ajax event="rowUnselect" listener="#{directorBean.limpiar()}" update=":formulario"/>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="IdPelicula"/>
                        </f:facet>
                        <h:outputText value="#{item.idPelicula}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Titulo"/>
                        </f:facet>
                        <h:outputText value="#{item.titulo}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Duracion"/>
                        </f:facet>
                        <h:outputText value="#{item.duracion}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="FechaEstreno"/>
                        </f:facet>
                        <h:outputText value="#{item.fechaEstreno}">
                            <f:convertDateTime pattern="MM/dd/yyyy" />
                        </h:outputText>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Sinopsis"/>
                        </f:facet>
                        <h:outputText value="#{item.sinopsis}" />
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Clasificacion"/>
                        </f:facet>
                        <h:outputText value="#{item.idClasificacion.clasificacion}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Director"/>
                        </f:facet>
                        <h:outputText value="#{item.idDirector.nombre}"/>
                    </p:column>
                </p:dataTable>
    </ui:define>
    <ui:define name="frm">
   
                <h1><h:outputText value="Pelicula"/></h1>
                <p:panelGrid columns="2">
                    <p:outputLabel value="IdPelicula:" for="idPelicula" />
                    <p:inputText id="idPelicula" value="#{peliculaBean.peli.idPelicula}" title="IdPelicula" required="true" requiredMessage="The IdPelicula field is required."/>
                    <p:outputLabel value="Titulo:" for="titulo" />
                    <p:inputText id="titulo" value="#{peliculaBean.peli.titulo}" title="Titulo" required="true" requiredMessage="The Titulo field is required."/>
                    <p:outputLabel value="Duracion:" for="duracion" />
                    <p:inputText id="duracion" value="#{peliculaBean.peli.duracion}" title="Duracion" required="true" requiredMessage="The Duracion field is required."/>
                    <p:outputLabel value="FechaEstreno:" for="fechaEstreno" />
                    <p:inputText id="fechaEstreno" value="#{peliculaBean.peli.fechaEstreno}" title="FechaEstreno">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </p:inputText>
                    <p:outputLabel value="Sinopsis:" for="sinopsis" />
                    <p:inputTextarea id="sinopsis" value="#{peliculaBean.peli.sinopsis}" title="Sinopsis" />
                    <p:outputLabel value="IdClasificacion:" for="idClasificacion" />
                    <p:selectOneMenu id="idClasificacion" value="#{peliculaBean.peli.idClasificacion}" >
                        <f:selectItems value="#{peliculaBean.listaclasificacion}"
                                       var="c"
                                       itemLabel="#{c}"
                                       itemValue="#{c.clasificacion}"/>
                    </p:selectOneMenu>
                    <p:outputLabel value="IdDirector:" for="idDirector" />
                    <p:selectOneMenu id="idDirector" value="#{peliculaBean.peli.idDirector}" >
                        <f:selectItems value="#{peliculaBean.listadirector}"
                                       var="d"
                                       itemLabel="#{d}"
                                       itemValue="#{d.nombre+" "+d.apellido}"/>
                    </p:selectOneMenu>
                </p:panelGrid>
    </ui:define>
    <ui:define name="btns">
        <p:commandButton actionListener="#{peliculaBean.crear()}" value="Crear" update=":tabla formulario" />
        <p:commandButton actionListener="#{peliculaBean.actualizar()}" value="Actualizar" update=":tabla :formulario"/>
        <p:commandButton actionListener="#{peliculaBean.eliminar()}" value="Eliminar" update=":tabla :formulario" />
                      
    </ui:define>
</ui:composition>
